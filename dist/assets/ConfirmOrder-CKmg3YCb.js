import{u as p,a as N,r as w,c as y,b as k,j as e,F as D,d as E}from"./index-DJtO58bF.js";const S=({isOpen:m,onClose:n,onSendToKitchen:h,cart:l,type:r,customerName:u,selectedTable:b,totalAmount:j})=>{const a=p(),{loading:i,success:c,error:d}=N(t=>t.order);if(w.useEffect(()=>()=>{c&&(a(y()),a(k()))},[a,c]),!m)return null;const o=parseInt(b.replace(/[^\d]/g,""),10),x=new Date,v=x.toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"}),f=x.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),g=async()=>{const t=l.map(s=>({mealId:s._id,quantity:s.quantity}));try{const s={orderItems:t,type:r==="dine-in"?"dine_in":"takeaway",...r==="dine-in"?{tableNumber:o}:{}};await a(E(s)).unwrap(),h()}catch(s){console.error("Failed to create order:",s)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg w-full max-h-[100vh] overflow-auto",children:e.jsxs("div",{className:"relative p-2 sm:p-3",children:[e.jsx("button",{className:"absolute top-4 right-4 text-neutral-500 hover:text-neutral-700",onClick:n,"aria-label":"Close",children:e.jsx(D,{})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[r==="dine-in"&&e.jsxs("div",{className:"bg-primary-700 text-white w-10 h-10 rounded-lg flex items-center justify-center font-bold",children:["T",o]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:u}),e.jsx("p",{className:"text-xs text-neutral-500",children:r==="dine-in"?"dine in":"takeaway"})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-neutral-500 mt-4",children:[e.jsx("div",{children:v}),e.jsx("div",{children:f})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"text-sm grid grid-cols-3 gap-4 font-medium text-neutral-700 pb-2 border-b",children:[e.jsx("div",{children:"Items"}),e.jsx("div",{className:"text-center",children:"Quantity"}),e.jsx("div",{className:"text-right",children:"Price"})]}),e.jsx("div",{className:"max-h-[45vh] overflow-y-auto [scrollbar-width:none] [::-webkit-scrollbar]:hidden",children:l.map(t=>e.jsxs("div",{className:"grid grid-cols-3 gap-4 py-2 border-b border-neutral-100",children:[e.jsx("div",{className:"text-xs text-blue-600 truncate",children:t.name}),e.jsx("div",{className:"text-xs text-center",children:t.quantity}),e.jsxs("div",{className:"text-xs text-right",children:[t.price," AED"]})]},t._id))}),e.jsxs("div",{className:"text-sm flex justify-between items-center pt-3 font-semibold",children:[e.jsx("div",{children:"Total"}),e.jsxs("div",{className:"text-right",children:[j," AED"]})]})]}),d&&e.jsx("div",{className:"text-red-500 text-sm mb-4 text-center",children:d}),e.jsxs("div",{className:"flex gap-1 text-sm",children:[e.jsx("button",{className:`flex-1 bg-[#EEAA42] text-white py-2 rounded hover:bg-[#bf8021] transition-colors ${i?"opacity-50 cursor-not-allowed":""}`,onClick:g,disabled:i,children:i?"Processing...":"Prepare order"}),e.jsx("button",{className:"flex-1 bg-white border border-neutral-300 text-neutral-700 py-2 rounded hover:bg-neutral-50 transition-colors",onClick:n,children:"Cancel"})]})]})})})};export{S as default};
